<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="500.0" prefWidth="700.0" style="-fx-background-color: linear-gradient(to bottom, #eceff1, #cfd8dc);"
            xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="ood.application.moneykeeper.controller.TransactionTestController">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <top>
        <VBox spacing="10">
            <Label text="Quản lý giao dịch" style="-fx-font-weight: bold; -fx-font-size: 24px;"/>
            <Separator/>
        </VBox>
    </top>

    <center>
        <VBox spacing="15">
            <!-- Transaction Form -->
            <TitledPane text="Thêm/Chỉnh sửa giao dịch" expanded="true">
                <VBox spacing="10" style="-fx-background-color: white; -fx-background-radius: 5; -fx-padding: 15;">
                    <GridPane hgap="15" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="100" prefWidth="120"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="200" prefWidth="250"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="80" prefWidth="120"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150" prefWidth="150"/>
                        </columnConstraints>

                        <!-- Row 0 -->
                        <Label text="Loại giao dịch:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <HBox spacing="20" alignment="CENTER_LEFT" GridPane.rowIndex="0" GridPane.columnIndex="1">
                            <RadioButton fx:id="expenseRadio" text="Chi tiêu" selected="true">
                                <toggleGroup>
                                    <ToggleGroup fx:id="transactionType"/>
                                </toggleGroup>
                            </RadioButton>
                            <RadioButton fx:id="incomeRadio" text="Thu nhập" toggleGroup="$transactionType"/>
                        </HBox>

                        <Label text="Ngày giao dịch:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                        <DatePicker fx:id="transactionDate" GridPane.rowIndex="0" GridPane.columnIndex="3" promptText="Chọn ngày"/>

                        <!-- Row 1 -->
                        <Label text="Số tiền:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <TextField fx:id="amountField" GridPane.rowIndex="1" GridPane.columnIndex="1" promptText="Nhập số tiền"/>

                        <Label text="Ví:" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                        <ComboBox fx:id="walletComboBox" GridPane.rowIndex="1" GridPane.columnIndex="3" promptText="Chọn ví" prefWidth="150"/>

                        <!-- Row 2 -->
                        <Label text="Hạng mục:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <ComboBox fx:id="categoryComboBox" GridPane.rowIndex="2" GridPane.columnIndex="1" promptText="Chọn hạng mục" prefWidth="200"/>

                        <!-- Row 3 -->
                        <Label text="Mô tả:" GridPane.rowIndex="3" GridPane.columnIndex="0" GridPane.valignment="TOP">
                            <GridPane.margin>
                                <Insets top="5"/>
                            </GridPane.margin>
                        </Label>
                        <TextArea fx:id="descriptionFields" GridPane.rowIndex="3" GridPane.columnIndex="1"
                                  GridPane.columnSpan="3" promptText="Nhập mô tả cho giao dịch" prefHeight="60"/>

                        <!-- Row 4: Buttons -->
                        <HBox alignment="CENTER_RIGHT" spacing="10" GridPane.rowIndex="4"
                              GridPane.columnIndex="1" GridPane.columnSpan="3">
                            <Button fx:id="clearButton" text="Xóa trắng"
                                    style="-fx-background-color: #6c757d; -fx-text-fill: white;"/>
                            <Button fx:id="saveButton" text="Lưu giao dịch"
                                    style="-fx-background-color: #28a745; -fx-text-fill: white;"/>
                        </HBox>
                    </GridPane>

                    <Label fx:id="errorLabel" style="-fx-text-fill: red;" visible="false"/>
                </VBox>
            </TitledPane>

            <!-- Transaction List -->
            <TitledPane text="Danh sách giao dịch" expanded="true" VBox.vgrow="ALWAYS">
                <VBox spacing="10" style="-fx-background-color: white; -fx-background-radius: 5; -fx-padding: 15;">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Lọc theo:"/>
                        <ComboBox fx:id="filterComboBox" prefWidth="150"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <TextField fx:id="searchField" promptText="Tìm kiếm giao dịch..." prefWidth="200"/>
                        <Button fx:id="searchButton" text="Tìm" style="-fx-background-color: #0288d1; -fx-text-fill: white;"/>
                    </HBox>

                    <TableView fx:id="transactionTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="dateColumn" text="Ngày" prefWidth="100"/>
                            <TableColumn fx:id="typeColumn" text="Loại" prefWidth="80"/>
                            <TableColumn fx:id="amountColumn" text="Số tiền" prefWidth="100"/>
                            <TableColumn fx:id="categoryColumn" text="Hạng mục" prefWidth="120"/>
                            <TableColumn fx:id="descriptionColumn" text="Mô tả" prefWidth="200"/>
                            <TableColumn fx:id="walletColumn" text="Ví" prefWidth="120"/>
                            <TableColumn fx:id="actionColumn" text="Thao tác" prefWidth="100"/>
                        </columns>
                        <placeholder>
                            <Label text="Không có giao dịch nào"/>
                        </placeholder>
                    </TableView>

                    <HBox alignment="CENTER_RIGHT" spacing="10">
                        <Label text="Tổng chi:"/>
                        <Label fx:id="totalExpenseLabel" text="0 VNĐ" style="-fx-text-fill: red;"/>
                        <Label text="Tổng thu:" style="-fx-padding: 0 0 0 20;"/>
                        <Label fx:id="totalIncomeLabel" text="0 VNĐ" style="-fx-text-fill: green;"/>
                    </HBox>
                </VBox>
            </TitledPane>
        </VBox>
    </center>

    <bottom>
        <HBox alignment="CENTER_RIGHT" spacing="10">
            <Button fx:id="closeButton" text="Đóng" style="-fx-background-color: #6c757d; -fx-text-fill: white;"/>
        </HBox>
    </bottom>
</BorderPane>